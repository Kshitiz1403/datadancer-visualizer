{
  "states": [
    {
      "name": "ExtractApplication",
      "type": "operation",
      "startTime": "2025-07-02T11:54:26.453717+05:30",
      "endTime": "2025-07-02T11:54:26.454285+05:30",
      "input": {
        "application": {
          "id": 12346,
          "loan": {
            "amount": 150000,
            "purpose": "debt_consolidation",
            "term": 36
          },
          "user": {
            "id": "USER124",
            "income": 80000,
            "name": "Jane Smith"
          }
        }
      },
      "output": {
        "applicant": {
          "id": "USER124",
          "income": 80000,
          "name": "Jane Smith"
        },
        "applicationId": "12346",
        "loan": {
          "amount": 150000,
          "purpose": "debt_consolidation",
          "term": 36
        },
        "timestamp": 1751437466.454197
      },
      "actions": [
        {
          "activityName": "JQ",
          "arguments": {
            "data": {
              "application": {
                "id": 12346,
                "loan": {
                  "amount": 150000,
                  "purpose": "debt_consolidation",
                  "term": 36
                },
                "user": {
                  "id": "USER124",
                  "income": 80000,
                  "name": "Jane Smith"
                }
              }
            },
            "query": "{ applicant: .application.user, loan: .application.loan, applicationId: (.application.id | tostring), timestamp: now }"
          },
          "startTime": "2025-07-02T11:54:26.45375+05:30",
          "endTime": "2025-07-02T11:54:26.454236+05:30",
          "output": {
            "applicant": {
              "id": "USER124",
              "income": 80000,
              "name": "Jane Smith"
            },
            "applicationId": "12346",
            "loan": {
              "amount": 150000,
              "purpose": "debt_consolidation",
              "term": 36
            },
            "timestamp": 1751437466.454197
          }
        }
      ]
    },
    {
      "name": "EnrichUserData",
      "type": "operation",
      "startTime": "2025-07-02T11:54:26.454395+05:30",
      "endTime": "2025-07-02T11:54:26.768768+05:30",
      "input": {
        "applicant": {
          "id": "USER124",
          "income": 80000,
          "name": "Jane Smith"
        },
        "applicationId": "12346",
        "loan": {
          "amount": 150000,
          "purpose": "debt_consolidation",
          "term": 36
        },
        "timestamp": 1751437466.454197
      },
      "output": {
        "enriched": {
          "args": {},
          "headers": {
            "accept-encoding": "gzip",
            "host": "postman-echo.com",
            "user-agent": "Go-http-client/2.0",
            "x-forwarded-proto": "https",
            "x-user-id": "USER124"
          },
          "url": "https://postman-echo.com/get"
        },
        "meta": {
          "requestId": "12346"
        },
        "user": {
          "id": "USER124",
          "income": 80000,
          "name": "Jane Smith"
        }
      },
      "actions": [
        {
          "activityName": "HTTPRequest",
          "arguments": {
            "headers": {
              "X-Request-ID": "12346",
              "X-User-ID": "USER124"
            },
            "method": "GET",
            "url": "https://postman-echo.com/get"
          },
          "startTime": "2025-07-02T11:54:26.454414+05:30",
          "endTime": "2025-07-02T11:54:26.768053+05:30",
          "output": {
            "body": "{\"args\":{},\"headers\":{\"host\":\"postman-echo.com\",\"x-user-id\":\"USER124\",\"accept-encoding\":\"gzip\",\"user-agent\":\"Go-http-client/2.0\",\"x-forwarded-proto\":\"https\"},\"url\":\"https://postman-echo.com/get\"}",
            "headers": {
              "Content-Length": "195",
              "Content-Type": "application/json; charset=utf-8",
              "Date": "Wed, 02 Jul 2025 06:24:26 GMT",
              "Etag": "W/\"c3-TMQC0Dl66XvqmbCiaBAnwln/ESg\"",
              "Server": "istio-envoy",
              "Set-Cookie": "sails.sid=s%3ASItncSjJGyq0zuSqxGujWV9SQ8MID_YY.7ey8CZLuuKpAFIgKCAP3dr0iRF0wsezkxKraI4eFfG8; Path=/; HttpOnly",
              "Vary": "Accept-Encoding",
              "X-Envoy-Upstream-Service-Time": "4"
            },
            "statusCode": 200
          }
        },
        {
          "activityName": "JQ",
          "arguments": {
            "data": {
              "current": {
                "body": "{\"args\":{},\"headers\":{\"host\":\"postman-echo.com\",\"x-user-id\":\"USER124\",\"accept-encoding\":\"gzip\",\"user-agent\":\"Go-http-client/2.0\",\"x-forwarded-proto\":\"https\"},\"url\":\"https://postman-echo.com/get\"}",
                "headers": {
                  "Content-Length": "195",
                  "Content-Type": "application/json; charset=utf-8",
                  "Date": "Wed, 02 Jul 2025 06:24:26 GMT",
                  "Etag": "W/\"c3-TMQC0Dl66XvqmbCiaBAnwln/ESg\"",
                  "Server": "istio-envoy",
                  "Set-Cookie": "sails.sid=s%3ASItncSjJGyq0zuSqxGujWV9SQ8MID_YY.7ey8CZLuuKpAFIgKCAP3dr0iRF0wsezkxKraI4eFfG8; Path=/; HttpOnly",
                  "Vary": "Accept-Encoding",
                  "X-Envoy-Upstream-Service-Time": "4"
                },
                "statusCode": 200
              },
              "globals": {},
              "initial": {
                "application": {
                  "id": 12346,
                  "loan": {
                    "amount": 150000,
                    "purpose": "debt_consolidation",
                    "term": 36
                  },
                  "user": {
                    "id": "USER124",
                    "income": 80000,
                    "name": "Jane Smith"
                  }
                }
              },
              "states": {
                "CalculateRiskScore": {
                  "factors": {
                    "amount": 150000,
                    "history": null,
                    "income": 80000
                  },
                  "score": 53
                },
                "EnrichUserData": {
                  "enriched": {
                    "args": {},
                    "headers": {
                      "accept-encoding": "gzip",
                      "host": "postman-echo.com",
                      "user-agent": "Go-http-client/2.0",
                      "x-forwarded-proto": "https",
                      "x-user-id": "USER124"
                    },
                    "url": "https://postman-echo.com/get"
                  },
                  "meta": {
                    "requestId": "12346"
                  },
                  "user": {
                    "id": "USER124",
                    "income": 80000,
                    "name": "Jane Smith"
                  }
                },
                "EvaluateApplication": {
                  "factors": {
                    "amount": 150000,
                    "history": null,
                    "income": 80000
                  },
                  "score": 53
                },
                "ExtractApplication": {
                  "applicant": {
                    "id": "USER124",
                    "income": 80000,
                    "name": "Jane Smith"
                  },
                  "applicationId": "12346",
                  "loan": {
                    "amount": 150000,
                    "purpose": "debt_consolidation",
                    "term": 36
                  },
                  "timestamp": 1751437466.454197
                },
                "RequestAdditionalDocuments": {
                  "body": "{\"args\":{},\"data\":{\"reason\":\"Additional verification needed\",\"requiredDocs\":[\"bankStatements\",\"taxReturns\"],\"riskFactors\":{\"amount\":150000,\"history\":null,\"income\":80000}},\"files\":{},\"form\":{},\"headers\":{\"host\":\"postman-echo.com\",\"content-type\":\"application/json\",\"x-risk-score\":\"53\",\"x-user-id\":\"USER124\",\"content-length\":\"152\",\"accept-encoding\":\"gzip\",\"user-agent\":\"Go-http-client/2.0\",\"x-forwarded-proto\":\"https\"},\"json\":{\"reason\":\"Additional verification needed\",\"requiredDocs\":[\"bankStatements\",\"taxReturns\"],\"riskFactors\":{\"amount\":150000,\"history\":null,\"income\":80000}},\"url\":\"https://postman-echo.com/post\"}",
                  "headers": {
                    "Content-Length": "614",
                    "Content-Type": "application/json; charset=utf-8",
                    "Date": "Wed, 02 Jul 2025 06:24:27 GMT",
                    "Etag": "W/\"266-iA1V2os5tOtdGW7suhYZv/lTSfA\"",
                    "Server": "istio-envoy",
                    "Set-Cookie": "sails.sid=s%3AihDdLXeefr1RznzqXujBx2FUTIatmy-b.%2FDk0nvBXrr6zQ7NjjHtjLc0lDYW7pI5aEM4h%2B82XLe0; Path=/; HttpOnly",
                    "Vary": "Accept-Encoding",
                    "X-Envoy-Upstream-Service-Time": "4"
                  },
                  "statusCode": 200
                }
              }
            },
            "query": "{ user: .states.ExtractApplication.applicant, enriched: .current.body | fromjson, meta: { requestId: .states.ExtractApplication.applicationId } }"
          },
          "startTime": "2025-07-02T11:54:26.768101+05:30",
          "endTime": "2025-07-02T11:54:26.768703+05:30",
          "output": {
            "enriched": {
              "args": {},
              "headers": {
                "accept-encoding": "gzip",
                "host": "postman-echo.com",
                "user-agent": "Go-http-client/2.0",
                "x-forwarded-proto": "https",
                "x-user-id": "USER124"
              },
              "url": "https://postman-echo.com/get"
            },
            "meta": {
              "requestId": "12346"
            },
            "user": {
              "id": "USER124",
              "income": 80000,
              "name": "Jane Smith"
            }
          }
        }
      ]
    },
    {
      "name": "CalculateRiskScore",
      "type": "operation",
      "startTime": "2025-07-02T11:54:26.768862+05:30",
      "endTime": "2025-07-02T11:54:26.769354+05:30",
      "input": {
        "enriched": {
          "args": {},
          "headers": {
            "accept-encoding": "gzip",
            "host": "postman-echo.com",
            "user-agent": "Go-http-client/2.0",
            "x-forwarded-proto": "https",
            "x-user-id": "USER124"
          },
          "url": "https://postman-echo.com/get"
        },
        "meta": {
          "requestId": "12346"
        },
        "user": {
          "id": "USER124",
          "income": 80000,
          "name": "Jane Smith"
        }
      },
      "output": {
        "factors": {
          "amount": 150000,
          "history": null,
          "income": 80000
        },
        "score": 53
      },
      "actions": [
        {
          "activityName": "JQ",
          "arguments": {
            "data": {
              "current": {
                "enriched": {
                  "args": {},
                  "headers": {
                    "accept-encoding": "gzip",
                    "host": "postman-echo.com",
                    "user-agent": "Go-http-client/2.0",
                    "x-forwarded-proto": "https",
                    "x-user-id": "USER124"
                  },
                  "url": "https://postman-echo.com/get"
                },
                "meta": {
                  "requestId": "12346"
                },
                "user": {
                  "id": "USER124",
                  "income": 80000,
                  "name": "Jane Smith"
                }
              },
              "globals": {},
              "initial": {
                "application": {
                  "id": 12346,
                  "loan": {
                    "amount": 150000,
                    "purpose": "debt_consolidation",
                    "term": 36
                  },
                  "user": {
                    "id": "USER124",
                    "income": 80000,
                    "name": "Jane Smith"
                  }
                }
              },
              "states": {
                "CalculateRiskScore": {
                  "factors": {
                    "amount": 150000,
                    "history": null,
                    "income": 80000
                  },
                  "score": 53
                },
                "EnrichUserData": {
                  "enriched": {
                    "args": {},
                    "headers": {
                      "accept-encoding": "gzip",
                      "host": "postman-echo.com",
                      "user-agent": "Go-http-client/2.0",
                      "x-forwarded-proto": "https",
                      "x-user-id": "USER124"
                    },
                    "url": "https://postman-echo.com/get"
                  },
                  "meta": {
                    "requestId": "12346"
                  },
                  "user": {
                    "id": "USER124",
                    "income": 80000,
                    "name": "Jane Smith"
                  }
                },
                "EvaluateApplication": {
                  "factors": {
                    "amount": 150000,
                    "history": null,
                    "income": 80000
                  },
                  "score": 53
                },
                "ExtractApplication": {
                  "applicant": {
                    "id": "USER124",
                    "income": 80000,
                    "name": "Jane Smith"
                  },
                  "applicationId": "12346",
                  "loan": {
                    "amount": 150000,
                    "purpose": "debt_consolidation",
                    "term": 36
                  },
                  "timestamp": 1751437466.454197
                },
                "RequestAdditionalDocuments": {
                  "body": "{\"args\":{},\"data\":{\"reason\":\"Additional verification needed\",\"requiredDocs\":[\"bankStatements\",\"taxReturns\"],\"riskFactors\":{\"amount\":150000,\"history\":null,\"income\":80000}},\"files\":{},\"form\":{},\"headers\":{\"host\":\"postman-echo.com\",\"content-type\":\"application/json\",\"x-risk-score\":\"53\",\"x-user-id\":\"USER124\",\"content-length\":\"152\",\"accept-encoding\":\"gzip\",\"user-agent\":\"Go-http-client/2.0\",\"x-forwarded-proto\":\"https\"},\"json\":{\"reason\":\"Additional verification needed\",\"requiredDocs\":[\"bankStatements\",\"taxReturns\"],\"riskFactors\":{\"amount\":150000,\"history\":null,\"income\":80000}},\"url\":\"https://postman-echo.com/post\"}",
                  "headers": {
                    "Content-Length": "614",
                    "Content-Type": "application/json; charset=utf-8",
                    "Date": "Wed, 02 Jul 2025 06:24:27 GMT",
                    "Etag": "W/\"266-iA1V2os5tOtdGW7suhYZv/lTSfA\"",
                    "Server": "istio-envoy",
                    "Set-Cookie": "sails.sid=s%3AihDdLXeefr1RznzqXujBx2FUTIatmy-b.%2FDk0nvBXrr6zQ7NjjHtjLc0lDYW7pI5aEM4h%2B82XLe0; Path=/; HttpOnly",
                    "Vary": "Accept-Encoding",
                    "X-Envoy-Upstream-Service-Time": "4"
                  },
                  "statusCode": 200
                }
              }
            },
            "query": "{ score: (.states.ExtractApplication.applicant.income / .states.ExtractApplication.loan.amount * 100 | floor), factors: { income: .states.ExtractApplication.applicant.income, amount: .states.ExtractApplication.loan.amount, history: .states.EnrichUserData.enriched.creditHistory } }"
          },
          "startTime": "2025-07-02T11:54:26.768895+05:30",
          "endTime": "2025-07-02T11:54:26.769305+05:30",
          "output": {
            "factors": {
              "amount": 150000,
              "history": null,
              "income": 80000
            },
            "score": 53
          }
        }
      ]
    },
    {
      "name": "EvaluateApplication",
      "type": "switch",
      "startTime": "2025-07-02T11:54:26.769473+05:30",
      "endTime": "2025-07-02T11:54:26.769569+05:30",
      "input": {
        "factors": {
          "amount": 150000,
          "history": null,
          "income": 80000
        },
        "score": 53
      },
      "output": {
        "factors": {
          "amount": 150000,
          "history": null,
          "income": 80000
        },
        "score": 53
      },
      "matchedCondition": "MediumRisk"
    },
    {
      "name": "RequestAdditionalDocuments",
      "type": "operation",
      "startTime": "2025-07-02T11:54:26.76964+05:30",
      "endTime": "2025-07-02T11:54:27.076689+05:30",
      "input": {
        "factors": {
          "amount": 150000,
          "history": null,
          "income": 80000
        },
        "score": 53
      },
      "output": {
        "body": "{\"args\":{},\"data\":{\"reason\":\"Additional verification needed\",\"requiredDocs\":[\"bankStatements\",\"taxReturns\"],\"riskFactors\":{\"amount\":150000,\"history\":null,\"income\":80000}},\"files\":{},\"form\":{},\"headers\":{\"host\":\"postman-echo.com\",\"content-type\":\"application/json\",\"x-risk-score\":\"53\",\"x-user-id\":\"USER124\",\"content-length\":\"152\",\"accept-encoding\":\"gzip\",\"user-agent\":\"Go-http-client/2.0\",\"x-forwarded-proto\":\"https\"},\"json\":{\"reason\":\"Additional verification needed\",\"requiredDocs\":[\"bankStatements\",\"taxReturns\"],\"riskFactors\":{\"amount\":150000,\"history\":null,\"income\":80000}},\"url\":\"https://postman-echo.com/post\"}",
        "headers": {
          "Content-Length": "614",
          "Content-Type": "application/json; charset=utf-8",
          "Date": "Wed, 02 Jul 2025 06:24:27 GMT",
          "Etag": "W/\"266-iA1V2os5tOtdGW7suhYZv/lTSfA\"",
          "Server": "istio-envoy",
          "Set-Cookie": "sails.sid=s%3AihDdLXeefr1RznzqXujBx2FUTIatmy-b.%2FDk0nvBXrr6zQ7NjjHtjLc0lDYW7pI5aEM4h%2B82XLe0; Path=/; HttpOnly",
          "Vary": "Accept-Encoding",
          "X-Envoy-Upstream-Service-Time": "4"
        },
        "statusCode": 200
      },
      "actions": [
        {
          "activityName": "JQ",
          "arguments": {
            "data": {
              "current": {
                "factors": {
                  "amount": 150000,
                  "history": null,
                  "income": 80000
                },
                "score": 53
              },
              "globals": {},
              "initial": {
                "application": {
                  "id": 12346,
                  "loan": {
                    "amount": 150000,
                    "purpose": "debt_consolidation",
                    "term": 36
                  },
                  "user": {
                    "id": "USER124",
                    "income": 80000,
                    "name": "Jane Smith"
                  }
                }
              },
              "states": {
                "CalculateRiskScore": {
                  "factors": {
                    "amount": 150000,
                    "history": null,
                    "income": 80000
                  },
                  "score": 53
                },
                "EnrichUserData": {
                  "enriched": {
                    "args": {},
                    "headers": {
                      "accept-encoding": "gzip",
                      "host": "postman-echo.com",
                      "user-agent": "Go-http-client/2.0",
                      "x-forwarded-proto": "https",
                      "x-user-id": "USER124"
                    },
                    "url": "https://postman-echo.com/get"
                  },
                  "meta": {
                    "requestId": "12346"
                  },
                  "user": {
                    "id": "USER124",
                    "income": 80000,
                    "name": "Jane Smith"
                  }
                },
                "EvaluateApplication": {
                  "factors": {
                    "amount": 150000,
                    "history": null,
                    "income": 80000
                  },
                  "score": 53
                },
                "ExtractApplication": {
                  "applicant": {
                    "id": "USER124",
                    "income": 80000,
                    "name": "Jane Smith"
                  },
                  "applicationId": "12346",
                  "loan": {
                    "amount": 150000,
                    "purpose": "debt_consolidation",
                    "term": 36
                  },
                  "timestamp": 1751437466.454197
                },
                "RequestAdditionalDocuments": {
                  "body": "{\"args\":{},\"data\":{\"reason\":\"Additional verification needed\",\"requiredDocs\":[\"bankStatements\",\"taxReturns\"],\"riskFactors\":{\"amount\":150000,\"history\":null,\"income\":80000}},\"files\":{},\"form\":{},\"headers\":{\"host\":\"postman-echo.com\",\"content-type\":\"application/json\",\"x-risk-score\":\"53\",\"x-user-id\":\"USER124\",\"content-length\":\"152\",\"accept-encoding\":\"gzip\",\"user-agent\":\"Go-http-client/2.0\",\"x-forwarded-proto\":\"https\"},\"json\":{\"reason\":\"Additional verification needed\",\"requiredDocs\":[\"bankStatements\",\"taxReturns\"],\"riskFactors\":{\"amount\":150000,\"history\":null,\"income\":80000}},\"url\":\"https://postman-echo.com/post\"}",
                  "headers": {
                    "Content-Length": "614",
                    "Content-Type": "application/json; charset=utf-8",
                    "Date": "Wed, 02 Jul 2025 06:24:27 GMT",
                    "Etag": "W/\"266-iA1V2os5tOtdGW7suhYZv/lTSfA\"",
                    "Server": "istio-envoy",
                    "Set-Cookie": "sails.sid=s%3AihDdLXeefr1RznzqXujBx2FUTIatmy-b.%2FDk0nvBXrr6zQ7NjjHtjLc0lDYW7pI5aEM4h%2B82XLe0; Path=/; HttpOnly",
                    "Vary": "Accept-Encoding",
                    "X-Envoy-Upstream-Service-Time": "4"
                  },
                  "statusCode": 200
                }
              }
            },
            "query": "{ application: { id: .states.ExtractApplication.applicationId, timestamp: .states.ExtractApplication.timestamp }, risk: .states.CalculateRiskScore, user: .states.EnrichUserData.user }"
          },
          "startTime": "2025-07-02T11:54:26.769667+05:30",
          "endTime": "2025-07-02T11:54:26.769898+05:30",
          "output": {
            "application": {
              "id": "12346",
              "timestamp": 1751437466.454197
            },
            "risk": {
              "factors": {
                "amount": 150000,
                "history": null,
                "income": 80000
              },
              "score": 53
            },
            "user": {
              "id": "USER124",
              "income": 80000,
              "name": "Jane Smith"
            }
          }
        },
        {
          "activityName": "HTTPRequest",
          "arguments": {
            "body": {
              "reason": "Additional verification needed",
              "requiredDocs": [
                "bankStatements",
                "taxReturns"
              ],
              "riskFactors": {
                "amount": 150000,
                "history": null,
                "income": 80000
              }
            },
            "headers": {
              "Content-Type": "application/json",
              "X-Risk-Score": "53",
              "X-User-ID": "USER124"
            },
            "method": "POST",
            "url": "https://postman-echo.com/post"
          },
          "startTime": "2025-07-02T11:54:26.769926+05:30",
          "endTime": "2025-07-02T11:54:27.076601+05:30",
          "output": {
            "body": "{\"args\":{},\"data\":{\"reason\":\"Additional verification needed\",\"requiredDocs\":[\"bankStatements\",\"taxReturns\"],\"riskFactors\":{\"amount\":150000,\"history\":null,\"income\":80000}},\"files\":{},\"form\":{},\"headers\":{\"host\":\"postman-echo.com\",\"content-type\":\"application/json\",\"x-risk-score\":\"53\",\"x-user-id\":\"USER124\",\"content-length\":\"152\",\"accept-encoding\":\"gzip\",\"user-agent\":\"Go-http-client/2.0\",\"x-forwarded-proto\":\"https\"},\"json\":{\"reason\":\"Additional verification needed\",\"requiredDocs\":[\"bankStatements\",\"taxReturns\"],\"riskFactors\":{\"amount\":150000,\"history\":null,\"income\":80000}},\"url\":\"https://postman-echo.com/post\"}",
            "headers": {
              "Content-Length": "614",
              "Content-Type": "application/json; charset=utf-8",
              "Date": "Wed, 02 Jul 2025 06:24:27 GMT",
              "Etag": "W/\"266-iA1V2os5tOtdGW7suhYZv/lTSfA\"",
              "Server": "istio-envoy",
              "Set-Cookie": "sails.sid=s%3AihDdLXeefr1RznzqXujBx2FUTIatmy-b.%2FDk0nvBXrr6zQ7NjjHtjLc0lDYW7pI5aEM4h%2B82XLe0; Path=/; HttpOnly",
              "Vary": "Accept-Encoding",
              "X-Envoy-Upstream-Service-Time": "4"
            },
            "statusCode": 200
          }
        }
      ]
    }
  ]
}